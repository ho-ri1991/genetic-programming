# genetic-programming
This repository is a framework of genetic programming in C++.
This framework mainly provides the expression of individuals (i.e. syntax trees) and evaluation of them (i.e. execution of syntax trees).
We can manipulate syntax trees dynamically. Following properties are supported in the syntax tree as default:
- type-strict nodes
  - some default nodes are provided (ex. add, if, substitution, or, greater etc...)
- user defined nodes
  - derive NodeBase class and define evaluation.
- local variables
- substitution to variables (arguments and local variables)
- subroutines
  - recursions
  - reference passing

This framework also provides some simple genetic operations (mutation and crossover, selection etc...) and IO of syntax trees and training data.

An example of representation of a tree is the following XML form:
```
<?xml version="1.0" encoding="utf-8"?>
<tree>
    <name>Fact[int]</name>
    <return_type>int</return_type>
    <arguments>
        <type>int</type>
    </arguments>
    <local_variables>
    </local_variables>
    <tree_entity>
        +--If[int]
            |
            +--Greater[int]
            |   |
            |   +--Argument[int,0]
            |   |
            |   +--Const[int,1]
            |
            +--Mult[int]
            |   |
            |   +--Argument[int,0]
            |   |
            |   +--Fact[int]
            |       |
            |       +--Sub[int]
            |           |
            |           +--Argument[int,0]
            |           |
            |           +--Const[int,1]
            |
            +--Const[int,1]


    </tree_entity>
</tree>

```

Of course, you need not write the `tree_entity` field like the upper example.
The format is more loose.
- the node name start with the header `+--` and does not contain white spaces
- there must be zero or one node name after the header `+--`
- if the node header `+--` is not found, the line is ignored   

The following format is also fine (the same tree as the upper example):
```
<?xml version="1.0" encoding="utf-8"?>
<tree>
    <name>Fact[int]</name>
    <return_type>int</return_type>
    <arguments>
        <type>int</type>
    </arguments>
    <local_variables>
    </local_variables>
    <tree_entity>
+--If[int]
+--Greater[int]
+--Argument[int,0]
+--Const[int,1]
+--Mult[int]
+--Argument[int,0]
+--Fact[int]
+--Sub[int]
+--Const[int,1]
+--Const[int,1]

    </tree_entity>
</tree>

```

You can load and execute this tree by using example/tree_executor.cpp.

## requirements
- C++ compiler and standard library >= C++17
- boost >= 1.62

We have compiled by g++7.2.0 with boost 1.62.0

## getting started

This framework is a header only template library.
Therefore, you can use this framework just including header files.

### build examples and tests
We use cmake to build.
Execute following commands to build examples and tests.
If you want to run tests execute `ctest` after the build.
For details of build, see `CMakeLists.txt`.

```
$ git clone https://github.com/ho-ri1991/genetic-programming.git
$ cd  genetic-programming
$ mkdir build
$ cmake ..
$ make
```

After the build, you will find executables in the `example1` directory.
You can run the genetic_programming by executing `./eexample1/example1 ${YOUR_PROBLEM_FILE1} ${YOUR_PROBLEM_FILE2} ...`.
The `example1` load problem filea and solve them sequentially.
After solving each problem, `example1` write top 10 trees in the order of the fitness.
See `genetic_programing/example1/problem_.*.xml` for example problem format.
`example1/tree_executor` load tree and execute it, therefore you can use this for check of trees generated by  `example1`.

### directory structures
- `include/gp/genetic_operations`: some simple functions and classes for genetic operations (mutation, crossover, selection etc...)
- `include/gp/node`: Definitions of node classes are located here. `NodeInterface` class is the interface of nodes and user defined nodes can be defined by inheriting `NodeBase` class. See `basic_operation_node.hpp` for how to fine user defined nodes.
- `include/gp/traits`: Some traits classes for concept by traits. These traits are used in `include/gp/tree_operations`.
- `include/gp/tree`: The definition of the tree class.
- `include/gp/tree_operations`: Some utility functions for tree structures (IO of tree, Random tree generator, get tree depth, etc...)
